# estudos-sql
Estudos sobre SQL

MYSQL Workbench

TABELA - PROCEDURES - TRIGGERS - VIEW

SELECT * FROM CIDADE -> Seleciona TODOS os campos da tabela CIDADE

SELECT NOME, ID, PRECO FROM tbproduto;
SELECT NOME AS NOME_PRODUTO, PRECO AS PRECO_PRODUTO FROM tbproduto;
SELECT NOME, ID FROM tbproduto LIMIT 5;
SELECT * FROM tabela_de_clientes LIMIT 2,3; /*Informa que pegará 3 registros a partir da terceira posicão, pois ele considera o primeiro elemento o 0*/
SELECT * FROM notas_fiscais WHERE DATA_VENDA = '2017-01-01' LIMIT 10;
SELECT * FROM tbproduto WHERE EMBALAGEM='LATA';

CREATE {DATABASE or SCHEMA} "nome da tabela"    <-- CRIA
DROP {DATABASE or SCHEMA} "nome da tabela"      <-- DELETA (cuidado)

AUTO_IMCREMENT
DATETIME

DELETE FROM tbprodutos WHERE id='0000000000000001';
DELETE FROM tbproduto WHERE PRECO_LISTA BETWEEN 10 AND 12;

ALTER TABLE tbproduto ADD COLUMN DATA_REGISTRO DATETIME;
ALTER TABLE tbproduto ADD PRIMARY KEY (ID);

SELECT * FROM tbproduto WHERE QUANTIDADE_DE_UNIDADES > 10;
SELECT TOP 2 * FROM tbproduto WHERE QUANTIDADE_DE_UNIDADES > 4;
SELECT * FROM tbproduto WHERE QUANTIDADE_DE_UNIDADES <> 10; /*selecione todos os registros que sejam tenham qnt. de unidades diferentes de 10*/
SELECT * FROM tbproduto WHERE PRECO_LISTA > 20 AND PRECO_LISTA < 19;
SELECT * FROM tbproduto WHERE PRECO_LISTA BETWEEN 10 AND 11;
SELECT * FROM tbcliente WHERE NOME > "Rafa";

SELECT * FROM tbcliente WHERE DATA_NASCIMENTO < '1990-05-13';
SELECT * FROM tbcliente WHERE YEAR(DATA_NASCIMENTO) >= 1997;
SELECT * FROM tbcliente WHERE YEAR(DATA_NASCIMENTO) BETWEEN 1994 AND 2002;
SELECT * FROM tbcliente WHERE MONTH(DATA_NASCIMENTO) BETWEEN 10 AND 20;
SELECT * FROM tbcliente WHERE DAY(DATA_NASCIMENTO) >= 15;

SELECT * FROM tbcliente WHERE IDADE > 23 and SEXO = 'F';
SELECT * FROM tbcliente WHERE BAIRRO = 'Jardins' OR BAIRRO = 'Cidade Nova';
SELECT * FROM tbcliente WHERE (BAIRRO = 'Jardins' AND IDADE > 30) OR (CIDADE = 'Rio de Janeiro');

SELECT DINSTINCT * FROM tbcliente WHERE CIDADE = 'Rio de Janeiro';
SELECT * FROM tbcliente WHERE NOME LIKE '%Pedro%';  <-- tem Pedro
SELECT * FROM tbcliente WHERE NOME LIKE 'João%';    <-- começam com João
SELECT * FROM tbcliente WHERE NOME LIKE '%João';    <-- terminam com João

SELECT TOP 60 PERCENT * FROM tbproduto;
SELECT MIN(QUANTIDADE_DE_UNIDADES) AS MENOR_QUANTIDADE FROM tbproduto;
SELECT MAX(QUANTIDADE_DE_UNIDADES) AS MAIOR_QUANTIDADE FROM tbproduto;

UPDATE tbproduto SET NOME='suco' WHERE id='00000000000002';

INSERT INTO tbproduto(ID, NOME, EMBALAGEM, QUANTIDADE_DE_UNIDADES, VOLUME, DATA_REGISTRO)
VALUES('00001', 'SUCO', 'LATA', 3, '300ml', '2017-10-08');

CREATE TABLE tbproduto(
ID VARCHAR(11),
NOME VARCHAR(100),
EMBALAGEM (50),
QUANTIDADE_DE_UNIDADE INT,
VOLUME VARCHAR(40),
DATA_REGISTRO DATETIME);

SELECT * FROM tabela_de_produtos ORDER BY PRECO_DE_LISTA;
SELECT * FROM tabela_de_produtos ORDER BY PRECO_DE_LISTA DESC;
SELECT * FROM tabela_de_produtos ORDER BY NOME_DO_PRODUTO, PRECO_DE_LISTA;
SELECT * FROM tabela_de_produtos ORDER BY NOME_DO_PRODUTO DESC, PRECO_DE_LISTA;
SELECT * FROM tabela_de_produtos ORDER BY NOME_DO_PRODUTO DESC, PRECO_DE_LISTA DESC;
SELECT * FROM tabela_de_produtos WHERE NOME_DO_PRODUTO LIKE '%Linha Refrescante%' ORDER BY PRECO_DE_LISTA;

SELECT * FROM tabela_de_produtos WHERE NOME_DO_PRODUTO LIKE '%Linha Refrescante - 1 Litro - Morango/Limão%'; /*OU*/
SELECT * FROM tabela_de_produtos WHERE NOME_DO_PRODUTO = 'Linha Refrescante - 1 Litro - Morango/Limão';
SELECT * FROM itens_notas_fiscais WHERE CODIGO_DO_PRODUTO = '1101035' ORDER BY QUANTIDADE DESC;

SUM, MAX, MIN, AVG, COUNT / GROUP BY

SELECT BAIRRO, VOLUME_DE_COMPRA FROM tabela_de_clientes;
SELECT BAIRRO, SUM(VOLUME_DE_COMPRA) AS TOTAL_VOLUME_DE_COMPRA FROM tabela_de_clientes GROUP BY BAIRRO;
SELECT ESTADO, SUM(LIMITE_DE_CREDITO) AS 'TOTAL LIMITE DE CRÉDITO' FROM tabela_de_clientes GROUP BY ESTADO;

SELECT * FROM itens_notas_fiscais ORDER BY PRECO;
SELECT COUNT(*) FROM itens_notas_fiscais; /*Conta o total de registros*/
SELECT CODIGO_DO_PRODUTO, COUNT(*) AS TOTAL_DE_REGISTROS FROM itens_notas_fiscais GROUP BY CODIGO_DO_PRODUTO;

SELECT CODIGO_DO_PRODUTO, COUNT(QUANTIDADE) AS QUANTIDADE_TOTAL FROM itens_notas_fiscais
WHERE CODIGO_DO_PRODUTO = '1101035' AND QUANTIDADE = 99 GROUP BY CODIGO_DO_PRODUTO;

HAVING (select depois dos resultados do group by)
SELECT ESTADO, LIMITE_DE_CREDITO FROM tabela_de_clientes;
SELECT ESTADO, SUM(LIMITE_DE_CREDITO) FROM tabela_de_clientes GROUP BY ESTADO;
SELECT ESTADO, SUM(LIMITE_DE_CREDITO) FROM tabela_de_clientes GROUP BY ESTADO HAVING SUM(LIMITE_DE_CREDITO) > 820000;

SELECT ESTADO, MAX(LIMITE_DE_CREDITO), MIN(LIMITE_DE_CREDITO) FROM tabela_de_clientes GROUP BY ESTADO
HAVING MAX(LIMITE_DE_CREDITO) > 180000;

SELECT ESTADO, MAX(LIMITE_DE_CREDITO), MIN(LIMITE_DE_CREDITO) FROM tabela_de_clientes GROUP BY ESTADO
HAVING MAX(LIMITE_DE_CREDITO) < 180000 AND MIN(LIMITE_DE_CREDITO) > 50000;

/*Quais foram os clientes que fizeram mais de 2000 compras em 2016?*/
SELECT * FROM notas_fiscais;
SELECT COUNT(*) AS 'TOTAL DE COMPRAS' FROM notas_fiscais;
SELECT CPF, COUNT(*) AS 'TOTAL DE COMPRAS' FROM notas_fiscais GROUP BY CPF;

SELECT CPF, COUNT(*) AS 'TOTAL DE COMPRAS' FROM notas_fiscais
WHERE YEAR(DATA_VENDA) = 2016 GROUP BY CPF
HAVING COUNT(*) > 2000;
